# Lalafo → Telegram бот (Deno Deploy)

Этот репозиторий рассчитан на деплой в Deno Deploy и хранение кода на GitHub.

## Файлы

- `main.ts` — основной код бота (парсинг Lalafo + отправка в Telegram + Deno KV + Deno.cron).
- `deno.json` — настройки для локального запуска (необязательно для Deno Deploy).

## Переменные окружения

В Deno Deploy (Settings → Environment Variables) нужно задать:

- `TELEGRAM_BOT_TOKEN` — токен Telegram-бота.
- `TELEGRAM_CHAT_ID` — ID чата/канала, куда слать объявления.
- `ADS_LIMIT` — максимально количество объявлений за один прогон (по умолчанию 30).
- `PAGES` — сколько страниц списка Lalafo просматривать (по умолчанию 3).

## Как использовать с GitHub и Deno Deploy

1. Создать новый репозиторий на GitHub.
2. Залить туда файлы из этого архива: `main.ts`, `deno.json`, `README.md`.
3. В Deno Deploy:
   - создать новый проект «New Project → GitHub» и выбрать этот репозиторий;
   - убедиться, что entrypoint — `main.ts`;
   - включить KV и Cron (если у тебя доступен этот функционал);
   - прописать переменные окружения, указанные выше.
4. Деплойнуть проект.
5. Для ручного запуска можно делать HTTP-запрос на путь `/run` — он вызывает один прогон парсинга.
   Основной плановый запуск делает `Deno.cron` внутри `main.ts` (раз в 30 минут).

Локальный запуск (через Deno CLI) возможен командой:

```bash
deno task serve
```

при условии, что заданы те же переменные окружения (`TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID` и т.д.).
